# plexilist-hook

A WebHook handler for Plex that syncs scrobble (watched anime) and rating events with AniList.

## Running

```bash
npm install
node index.js
```

## Config

### Library setup

Libraries for anime series and anime movies need to have specific names. This tool checks for `Metadata.librarySectionTitle` to be `Anime` and `Anime Movies`.

Furthermore there are ids needed for matching. Currently, only anidb ids inside the `gid` are supported. Those are generated by e.g. the [HAMA Agent](https://github.com/ZeroQI/Hama.bundle). Personally, I add `anidb.id` files to the media folders so that HAMA always matches the correct media.

### Registering users for sync

For authorizing access to the AniList accounts, access tokens are needed.

1. First copy the [configTemplate.json](./configTemplate.json) to `config.json`.
2. Then go to https://anilist.co/settings/developer and create a new app. Choose `{yourUrl}/anilist-callback` as the redirect url.
3. Copy the `ID` and paste it into the `clientId` property in `config.json`
4. Now send `{yourUrl}/anilist-login` to users to add/update their access tokens.
